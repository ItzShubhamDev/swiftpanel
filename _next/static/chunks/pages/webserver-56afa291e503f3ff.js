(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{2700:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/webserver",function(){return n(6474)}])},1057:function(e,s,n){"use strict";var r=n(1527);n(959);let i={logo:(0,r.jsx)("span",{children:"SwiftPanel"}),project:{link:"https://github.com/itzshubhamdev/swiftpanel"},docsRepositoryBase:"https://github.com/itzshubhamdev/swiftpanel",footer:{text:"MIT ".concat(new Date().getFullYear()," \xa9 ItzShubhamDev.")}};s.Z=i},6474:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return a.Z}});var r=n(1527),i=n(7265),l=n(4603),o=n(1057);n(6971);var t=n(313);n(8090);var a=n(5228);function c(e){let s=Object.assign({h2:"h2",p:"p",pre:"pre",code:"code",span:"span"},(0,t.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"getting-certificates",children:"Getting Certificates"}),"\n",(0,r.jsx)(s.p,{children:"We can use letsencrypt to get free SSL certificates for our domain."}),"\n",(0,r.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sudo "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"apt"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"install"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"certbot"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"python3-certbot-nginx"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"sudo "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"certbot"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"--nginx"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"example.com"})]})]})}),"\n",(0,r.jsx)(s.h2,{id:"nginx-configuration",children:"Nginx Configuration"}),"\n",(0,r.jsxs)(s.p,{children:["We can use the following configuration to proxy the requests to our application.\r\nMake sure to replace ",(0,r.jsx)(s.code,{children:"<domain>"})," with your domain and ",(0,r.jsx)(s.code,{children:"<port>"})," with the port your application is running on."]}),"\n",(0,r.jsx)(s.pre,{"data-language":"nginx","data-theme":"default",children:(0,r.jsxs)(s.code,{"data-language":"nginx","data-theme":"default",children:[(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"server"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" listen "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"80;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" server_name "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"<domain>;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"return"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"301"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" https://$server_name$request_uri;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"server"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" listen "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"443 http2 ssl;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" server_name "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"<domain>;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_certificate "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"/etc/letsencrypt/live/<domain>/fullchain.pem;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_certificate_key "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"/etc/letsencrypt/live/<domain>/privkey.pem;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_session_cache "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"shared:SSL:10m;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_protocols "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"SSLv3 TLSv1.2 TLSv1.3;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_ciphers "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"HIGH:!aNULL:!MD5;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" ssl_prefer_server_ciphers "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"on;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"location"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" / {"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_pass "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"http://localhost:<port>;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_http_version "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"1.1;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Upgrade $http_upgrade;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Connection "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"'upgrade'"}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:";"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"Host $host;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"X-Real-IP $remote_addr;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"X-Forwarded-Proto $scheme;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_set_header "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"X-Forwarded-For $proxy_add_x_forwarded_for;"})]}),"\n",(0,r.jsxs)(s.span,{className:"line",children:[(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"   "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:" proxy_cache_bypass "}),(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"$http_upgrade;"})]}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:(0,r.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})}),"\n",(0,r.jsx)(s.span,{className:"line",children:" "})]})})]})}e=n.hmd(e),(0,i.j)({Content:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,t.ah)(),e.components);return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)},nextraLayout:l.ZP,hot:e.hot,pageOpts:{filePath:"pages/webserver/index.mdx",route:"/webserver",frontMatter:{},pageMap:[{kind:"Folder",name:"database",route:"/database",children:[{kind:"MdxPage",name:"index",route:"/database"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"dependencies",route:"/dependencies",children:[{kind:"MdxPage",name:"index",route:"/dependencies"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"deployment",route:"/deployment",children:[{kind:"MdxPage",name:"index",route:"/deployment"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"environment",route:"/environment",children:[{kind:"MdxPage",name:"index",route:"/environment"},{kind:"Meta",data:{index:"Index"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Folder",name:"installation",route:"/installation",children:[{kind:"MdxPage",name:"index",route:"/installation"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Folder",name:"webserver",route:"/webserver",children:[{kind:"MdxPage",name:"index",route:"/webserver"},{kind:"Meta",data:{index:"Index"}}]},{kind:"Meta",data:{index:"Introduction",dependencies:"Dependencies",installation:"Installation",database:"Database",environment:"Environment",webserver:"Web Server",deployment:"Deployment",demo:{title:"Demo ↗",type:"page",href:"https://swiftpanel.itzshubhamdev.com",newWindow:!0}}}],headings:[{depth:2,value:"Getting Certificates",id:"getting-certificates"},{depth:2,value:"Nginx Configuration",id:"nginx-configuration"}],flexsearch:{codeblocks:!0},title:"Index"},themeConfig:o.Z,pageNextRoute:"/webserver",pageOptsChecksum:void 0,dynamicMetaModules:[]})}},function(e){e.O(0,[774,589,888,179],function(){return e(e.s=2700)}),_N_E=e.O()}]);